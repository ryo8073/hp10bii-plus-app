# HP10BII+ 電卓エミュレーターと資本蓄積計算ツール PRD

## 1. 概要

このプロダクトは、HP10BII+金融電卓のウェブエミュレーターと、CCIMで使用される資本蓄積（Capital Accumulation）計算機能を提供するウェブアプリケーションです。

## 2. 目的

- HP10BII+金融電卓の機能をウェブブラウザで利用可能にする
- 資本蓄積の計算を簡単に行えるツールを提供する
- モバイルとデスクトップの両方で使いやすいインターフェースを実現する

## 3. ユーザー要件

### 3.1 HP10BII+電卓エミュレーター

- HP10BII+の正確なキーレイアウトと機能マッピングを実装する
- すべての金融計算機能（TVM、NPV、IRR、債券計算、減価償却など）を実装する
- メモリ機能とシフト機能を完全に再現する
- タッチ操作とキーボード入力の両方をサポートする

### 3.2 資本蓄積計算機能

- 再投資率、安全率、総投資額を入力パラメータとして使用する
- 0年目からn年目までの資本蓄積を計算する
- 計算結果を表形式とグラフ形式で表示する
- 投資要約（ROI、IRR、投資回収期間など）を表示する

## 4. 機能要件

### 4.1 HP10BII+電卓エミュレーター

#### 4.1.1 基本機能
- 四則演算（加減乗除）
- メモリ操作（保存、呼び出し、加算、減算）
- 符号反転、パーセント計算

#### 4.1.2 金融計算機能
- TVM（時間価値計算）- N, I/YR, PV, PMT, FV
- キャッシュフロー分析（NPV, IRR）
- 減価償却計算
- 債券計算
- 利回り計算

#### 4.1.3 統計・数学機能
- 統計データの管理と分析
- 平均、標準偏差、線形回帰
- 三角関数、双曲線関数
- 階乗、順列、組み合わせ

#### 4.1.4 その他の機能
- 日付計算
- 表示形式の切り替え（通常、科学、工学）
- 角度モード（度、ラジアン）

### 4.2 資本蓄積計算機能

#### 4.2.1 入力パラメータ
- 再投資率（%）
- 安全率（%）
- 総投資額（円）
- 計算年数

#### 4.2.2 計算機能
- 年ごとの投資額、資本蓄積額、総額の計算
- 再投資額と安全額の計算
- 投資利回り（ROI）の計算
- 内部収益率（IRR）の計算
- 投資回収期間の計算

#### 4.2.3 表示機能
- 年ごとの計算結果を表形式で表示
- 資本蓄積の推移をグラフで表示
- 投資要約の表示

## 5. 非機能要件

### 5.1 ユーザビリティ
- 直感的で使いやすいインターフェース
- レスポンシブデザイン（モバイルとデスクトップに対応）
- タッチ操作とキーボード入力の両方をサポート

### 5.2 パフォーマンス
- 高速な計算処理
- スムーズなUI操作

### 5.3 互換性
- 主要なウェブブラウザ（Chrome、Firefox、Safari、Edge）で動作
- モバイルブラウザ（iOS Safari、Android Chrome）で動作

### 5.4 アクセシビリティ
- WCAG 2.1 AAレベルに準拠
- キーボードでの完全操作をサポート
- 適切なコントラスト比

### 5.5 セキュリティ
- ユーザーデータはローカルのみで処理（サーバーに送信しない）

## 6. デザイン要件

### 6.1 HP10BII+電卓エミュレーター
- HP10BII+の外観に似せたデザイン
- キーの配置と機能を優先し、見た目は二次的な優先度
- シフトアップ（青）とシフトダウン（オレンジ）の機能表示
- ダークモード対応

### 6.2 資本蓄積計算機能
- クリーンでモダンなデザイン
- 入力フォームと結果表示の明確な区分
- データの視覚化（グラフ）
- ダークモード対応

## 7. 技術要件

### 7.1 フロントエンド
- HTML5, CSS3, JavaScript
- レスポンシブデザイン
- 高精度計算ライブラリ（decimal.js）
- グラフ描画ライブラリ（Chart.js）

### 7.2 開発環境
- Cursor エディタでの開発
- モジュール化されたコード構造
- 適切なコメントとドキュメンテーション

## 8. 優先順位

1. HP10BII+電卓の機能とキー配置の正確な実装
2. 資本蓄積計算機能の実装
3. UIの最適化とレスポンシブデザイン
4. アクセシビリティ対応
5. ダークモード対応

## 9. 成功基準

- HP10BII+の全機能が正確に動作すること
- 資本蓄積計算が正確に行われ、結果が明確に表示されること
- モバイルとデスクトップの両方で使いやすいこと
- 主要なブラウザで問題なく動作すること
